(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1176:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"k",(function(){return i})),n.d(t,"j",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"p",(function(){return v})),n.d(t,"o",(function(){return g})),n.d(t,"b",(function(){return E})),n.d(t,"u",(function(){return _})),n.d(t,"s",(function(){return S})),n.d(t,"t",(function(){return O})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return k}));var a="In Class Vc Provider Update",r="Local Track Published",o="Local Track Stopped",s="Local Track Enabled",c="Local Track Disabled",i="Remote Track Subscribed",l="Remote Track Started",u="Remote Track Unpublished",d="Remote Track enabled",p="Remote Track Disabled",f="Room Participant Joined",h="Room Participant Removed",b="Remote Track Disabled Error",v="Stop Audio All",g="Start Audio All",E="InVideo Twilio Connection",_="TeacherClass Twilio Chat Init Error",S="Student FullScreen TurnedOff",O="Student FullScreen TurnedOn",m="Story Board Data Error",k="StudentClass Twilio Chat Init Error"},1177:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,r,o=n(5),s=n(22),c=n(3),i=n.n(c),l=n(53),u=n(64),d=n(65),p=n(68),f=n(66),h=n(67),b=n(2054),v=n(984),g=n.n(v),E=n(1074),_=n.n(E),S=n(6),O=n.n(S),m={CONNECTION_STATE_CHANGED:"connectionStateChanged",MESSAGE_ADDED:"messageAdded",MEMBER_JOINED:"memberJoined",MEMBER_LEFT:"memberLeft",TWILIO_CHANGED:"twilio:changed"},k=[m.MESSAGE_ADDED,m.MEMBER_JOINED,m.MEMBER_LEFT],I=new(function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this)))._initEvents=function(){e.client.on(m.CONNECTION_STATE_CHANGED,e._updateStateOnEventAndLog(m.CONNECTION_STATE_CHANGED)),k.forEach((function(t){e.channel.on(t,e._updateStateOnEventAndLog(t))})),e.client.on(m.DISCONNECTED,e._reconnect),window.addEventListener("beforeunload",e.close)},e._destroyEvents=function(){e.client&&e.client.removeAllListeners(m.CONNECTION_STATE_CHANGED),e.channel&&k.forEach((function(t){e.channel.removeAllListeners(t)})),[m.TWILIO_CHANGED,m.MESSAGE_ADDED].forEach((function(t){e.removeAllListeners(t)}))},e._loadChannelMessages=Object(l.a)(i.a.mark((function t(){var n,a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.channel.getMessages();case 2:return n=t.sent,a=n.items,r=void 0===a?[]:a,t.abrupt("return",r.map((function(e){return e.state})));case 6:case"end":return t.stop()}}),t)}))),e._loadChannelParticipants=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.channel.getMembersCount();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),e._updateStateOnEventAndLog=function(t){return function(){var n={};if(t===m.MESSAGE_ADDED){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];var c=r[0];e.emit(m.MESSAGE_ADDED,c.state),n.messages=[].concat(Object(s.a)(e.state.messages),[c.state])}e._updateState(n)}},e.onStateUpdate=function(t){return e.on(m.TWILIO_CHANGED,t)},e.onMessage=function(t){return e.on(m.MESSAGE_ADDED,t)},e.sendMessage=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.channel&&e.channel.sendMessage(t,n)},e._getClient=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.state.connected&&"disconnected"!==e.client.connectionState){t.next=7;break}return t.next=4,b.Client.create(r);case 4:e.client=t.sent,window.ccs=e.client,e._updateState();case 7:return t.abrupt("return",e.client);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e._reconnect=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("disconnected"!==e.room.state){t.next=5;break}return t.next=3,e._getClient();case 3:return t.next=5,e._joinChannel();case 5:case"end":return t.stop()}}),t)}))),e.state={connected:!1,connecting:!1,messages:[],participants:0},e}var n,c,v,g;return Object(h.a)(t,e),Object(d.a)(t,[{key:"_updateState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.client||{},a=n.connectionState,r=Object(o.a)({},this.state,{connected:"connected"===a,connecting:"connecting"===a},t);r.connected?this._loadChannelParticipants().then((function(t){r.participants=t,e.state=r,e.emit(m.TWILIO_CHANGED,e.getCurrentState())})).catch((function(){e.state=r,e.emit(m.TWILIO_CHANGED,e.getCurrentState())})):(this.state=r,this.emit(m.TWILIO_CHANGED,this.getCurrentState()))}},{key:"init",value:(g=Object(l.a)(i.a.mark((function e(){var t,n,o,s,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.token,o=t.channelId,!this.state.connecting){e.next=3;break}return e.abrupt("return");case 3:return r=n,a=o,this._updateState({connecting:!0}),e.prev=6,e.next=9,this._getClient();case 9:if(!this.client){e.next=23;break}return e.next=12,this._joinChannel();case 12:if(!this.channel){e.next=20;break}return this._initEvents(),e.next=16,this._loadChannelMessages();case 16:s=e.sent,this._updateState({messages:s}),e.next=21;break;case 20:this._updateState({connecting:!1});case 21:e.next=24;break;case 23:this._updateState({connecting:!1});case 24:e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(6),this._updateState({connecting:!1}),e.t0;case 30:case"end":return e.stop()}}),e,this,[[6,26]])}))),function(){return g.apply(this,arguments)})},{key:"getCurrentState",value:function(){return _()(this.state)}},{key:"_joinChannel",value:(v=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._getChannelById(a);case 4:if(this.channel=e.sent,window.cch=this.channel,!this.channel._canJoin||"joined"===O()(this.channel,"status")){e.next=9;break}return e.next=9,this.channel.join();case 9:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"_getChannelById",value:(c=Object(l.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getSubscribedChannels();case 2:if(n=e.sent,a=n.items,!(r=(void 0===a?[]:a).find((function(e){return e.sid===t})))){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,this.client.getChannelBySid(t);case 10:return(r=e.sent)._canJoin=!0,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"close",value:(n=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client){e.next=2;break}return e.abrupt("return");case 2:if(this._destroyEvents(),!this.channel){e.next=6;break}return e.next=6,this.channel.leave();case 6:if(!this.client){e.next=9;break}return e.next=9,this.client.shutdown();case 9:this._updateState();case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}(g.a));window.cs=I,t.b=I},1425:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(53);function s(e){return new Promise(function(){var t=Object(o.a)(r.a.mark((function t(n,a){var o,s,c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return s=t.sent,t.next=6,s.text();case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a();case 12:(c=document.createElement("html")).innerHTML=o,c||a(),(i=document.createElement("script")).innerHTML="\n    const syncSlide = () => {\n      const state = getSlideState();\n      sendEventToParentWindow('sync', state);\n    };\n    const getSlideState = () => {\n      const currentSlide = Reveal.getCurrentSlide();\n      const currentSlideId = currentSlide.getAttribute(\"data-id\");\n      const speakerNotes = SLConfig.deck.notes[currentSlideId];\n      const {\n        h,\n        v\n      } = Reveal.getIndices();\n      return {\n        totalSlides: Reveal.getTotalSlides(),\n        note: speakerNotes,\n        currentSlide: h || v,\n        indices: Reveal.getIndices(),\n        routes: Reveal.availableRoutes()\n      };\n    };\n    const sendEventToParentWindow = (event, payload = {}) => {\n      window.parent.postMessage({\n        event,\n        payload\n      }, \"*\");\n    };\n    const listenToEvents = () => {\n      Reveal.on('slidechanged', () => syncSlide());\n      Reveal.on('fragmentshown', () => syncSlide());\n      Reveal.on('fragmenthidden', () => syncSlide());\n      window.addEventListener(\"message\", (event) => {\n        const {\n          action,\n          verticalIndex,\n          horizontalIndex,\n          transitionIndex\n        } = event.data;\n        if (action === 'next') {\n          Reveal.next();\n        } else if (action === 'prev') {\n          Reveal.prev();\n        } else if (action === 'goToSlide') {\n          const args = [\n            horizontalIndex,\n            verticalIndex,\n            transitionIndex\n          ];\n          Reveal.slide(...args);\n        }\n      });\n    };\n    Reveal.configure({\n      controls: false,\n      progress: false,\n      hash: false,\n      keyboard: false,\n      slideNumber: false\n    });\n    const state = getSlideState();\n    listenToEvents();\n    sendEventToParentWindow(\"loaded\", state);\n  ",c.querySelector("body").appendChild(i),n(c.outerHTML);case 19:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}())}t.a=function(e){return new Promise(function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e||n(),t.next=3,s(e);case 3:a=t.sent,n(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},1447:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2),r=n.n(a),o=n(1519);function s(e){var t=e.children;return r.a.createElement(o.a.Consumer,null,(function(e){return t(e)}))}},1519:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(5),r=n(49),o=n(2),s=n.n(o),c=n(50),i=n(12),l=(n(16),n(1425)),u=n(803),d=n(1176),p=n(6),f=n.n(p),h=n(36),b=n(111);t.b=Object(c.connect)((function(e){return{classInterfaceData:Object(i.J)(e),currentIndex:Object(h.g)(e),storyBoardsInfo:Object(b.D)(e),isStoryBoardFetchInProgress:Object(b.v)(e),userRole:Object(h.d)(e)}}))((function(e){var t=e.classInterfaceData,n=void 0===t?{}:t,c=e.currentIndex,i=e.children,p=e.storyBoardsInfo,h=e.userRole,b=e.isStoryBoardFetchInProgress,g=Object(o.useState)(!0),E=Object(r.a)(g,2),_=E[0],S=E[1],O=Object(o.useState)(!0),m=Object(r.a)(O,2),k=m[0],I=m[1],C=Object(o.useState)([]),T=Object(r.a)(C,2),j=T[0],D=T[1],y=Object(o.useState)(null),A=Object(r.a)(y,2),w=A[0],L=A[1],M=Object(o.useState)(!1),N=Object(r.a)(M,2),x=N[0],U=N[1];Object(o.useEffect)((function(){if(p){var e=p;e.length&&!j.length&&D(e)}}),[p]),Object(o.useEffect)((function(){if(!b){U(!0),R(c);var e=j.find((function(e){return e.sequenceNo===c}))||{};e.html&&L(e.html),S(1===c),I(c===j.length)}}),[j,c,b]);var R=function(e){var t=j.find((function(t){return t.sequenceNo===e}))||{},r=t.html,o=t.loading,s=t.sequenceNo,i=t.storyBoardLink;if(n.id&&"celebration"===t.kind&&t.type){var p={event:"celebratorySlideShown",properties:Object(a.a)({slideType:t.type,userRole:h},Object(u.d)())};Object(u.f)(p)}!i||r||o||(U(!0),t.loading=!0,Object(l.a)(i).then((function(e){t.loading=!1,s===c&&L(e),t.html=e})).catch((function(e){t.loading=!1,console.log("StoryboardDataError",e),Object(u.c)({name:f()(e,"name","StoryboardDataError"),message:f()(e,"message","StoryboardDataError"),eventType:"Error"},d.q)})).finally((function(){U(!1)})))};return s.a.createElement(v.Provider,{value:{storyboardHTML:w,loadStoryboard:R,isFirstSlideshow:_,isLastSlideshow:k,isStoryBoardLoading:b||x}},i)}));var v=s.a.createContext({})},2120:function(e,t){},2155:function(e,t){},2408:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(348);t.a=function(e){var t=e.children;return r.a.createElement(o.a.Consumer,null,(function(e){return t({openUserActionDialog:e.openDialog})}))}},2724:function(e,t,n){"use strict";var a=n(49),r=n(2),o=n(50),s=n(820),c=n(16),i=n(9),l=n(111),u=n(215);t.a=Object(o.connect)((function(e){return{authUserId:Object(u.a)(e),websocketToken:Object(l.M)(e)}}),(function(e){return{d__getWebsocketToken:function(t){return e(i.Pg.request(t))}}}))((function(e){var t=e.websocketToken,n=e.authUserId,o=e.d__getWebsocketToken,i=e.children,l=void 0===i?null:i,u=Object(r.useState)(!1),d=Object(a.a)(u,2),p=d[0],f=d[1],h=(Object(c.lb)()||{}).vcMeetingId;return Object(r.useEffect)((function(){var e,n,a,r;p&&t.token&&(e=t.token,n=s.a.state,a=n.connected,r=n.connecting,a||r||s.a.init(e),f(!1))}),[t.token,p]),Object(r.useEffect)((function(){n&&h&&(f(!0),o({uid:n,roomId:h}))}),[n,h]),l}))},2733:function(e,t,n){"use strict";var a=n(22),r=n(64),o=n(65),s=n(68),c=n(66),i=n(67),l=n(2),u=n.n(l),d=n(50),p=n(12),f=n(9),h=n(181),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).initFirebaseSessionEvent=function(){var e=n.props.classInterfaceData.id;if(e){var t=Object(h.d)("protected/sessions/".concat(e),(function(e){return n.onSessionChangeEvent(e)})),r=Object(a.a)(n.state.firebaseEvents);r.push(t),n.setState({firebaseEvents:r})}},n.onSessionChangeEvent=function(e){var t=n.props.classInterfaceData.id,a=e.val();a&&a.lastUpdatedTimestamp&&n.props.d__refreshSessionAction({sessionId:t})},n.state={firebaseEvents:[]},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.initFirebaseSessionEvent()}},{key:"componentDidUpdate",value:function(e,t,n){(this.props.classInterfaceData&&this.props.classInterfaceData.id)!==(e.classInterfaceData&&e.classInterfaceData.id)&&this.initFirebaseSessionEvent()}},{key:"componentWillUnmount",value:function(){this.state.firebaseEvents.forEach((function(e){return e()}))}},{key:"render",value:function(){var e=this.props.children;return void 0===e?null:e}}]),t}(u.a.Component);t.a=Object(d.connect)((function(e){return{classInterfaceData:Object(p.J)(e)}}),(function(e){return{d__refreshSessionAction:function(){return e(f.Ph.request())}}}))(b)},2768:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(5),s=n(49),c=n(882);function i(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),i=n[0],u=n[1],d={to:"help desk",callLabel:null},p=Object(a.useState)(Object(o.a)({},d)),f=Object(s.a)(p,2),h=f[0],b=f[1];return r.a.createElement(l.Provider,{value:{openHelpDesk:function(e){var t=Object(o.a)({},d,e);b(t),u(!0)}}},i&&r.a.createElement(c.a,Object.assign({},h,{onClose:function(e){u(!1)}})),e.children)}n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return i}));var l=r.a.createContext({})},803:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(5),s=n(53),c=n(99),i=n(6),l=n.n(i),u=function(){var e=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,e.abrupt("return",{detected_camera:d(t.filter((function(e){return"videoinput"===e.kind}))),detected_speaker:d(t.filter((function(e){return"audiooutput"===e.kind}))),detected_microphone:d(t.filter((function(e){return"audioinput"===e.kind})))});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{deviceId:e.deviceId,id:e.id,groupId:e.groupId,kind:e.kind,label:e.label}}))},p=n(16),f=n(9);n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return _})),n.d(t,"g",(function(){return S}));var h=function(){return{session_id:l()(c.default.getState(),"entities.classes.classInterfacingDetails.class_booking.session_id",""),booking_id:l()(c.default.getState(),"entities.classes.classInterfacingDetails.booking_id",""),class_no:l()(c.default.getState(),"entities.classes.classInterfacingDetails.courseClassId",""),course:l()(c.default.getState(),"entities.classes.classInterfacingDetails.class_booking.course_class.courseClassType",""),curriculum:l()(c.default.getState(),"entities.classes.classInterfacingDetails.class_booking.course_class.classNumber",""),teacher_id:l()(c.default.getState(),"entities.classes.classInterfacingDetails.teacher_id",""),student_id:l()(c.default.getState(),"entities.classes.classInterfacingDetails.class_booking.studentId","")}},b=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n,a,s,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent,n=Object(p.td)(),a=Object(p.Pb)(),s=Object(p.gb)(),!n){e.next=11;break}return c=Object(o.a)({teacher_os:l()(s,"os.name",null),teacher_nationality:localStorage.getItem("countryCode"),teacher_broswer:l()(s,"browser.name",null),name:l()(a,"name",null)},t),e.abrupt("return",c);case 11:return i=Object(o.a)({student_os:l()(s,"os.name",null),student_nationality:localStorage.getItem("countryCode"),student_broswer:l()(s,"browser.name",null),student_name:l()(a,"name",null)},t),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e,t){var n,a,r=(n=Object(p.Pb)(),a="",a=n.isTeacher?"Teacher":"Student",{session_id:l()(c.default.getState(),"entities.classes.classInterfacingDetails.class_booking.session_id",""),user_id:l()(n,"user_id",""),user_type:a});c.default.dispatch(f.ji.trackEvent({event:t,properties:Object(o.a)({},e,r)}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.event&&e.properties&&c.default.dispatch(f.ji.trackEvent(e))},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(p.gb)(),a={teacher_broswer:l()(n,"browser.name",null),teacher_os:l()(n,"os.name",null),teacher_ram:navigator.deviceMemory};S(t,Object(o.a)({},a,e))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=h(),a=Object(o.a)({classType:l()(Object(p.lb)(),"class_booking.batchInfo.batchType","")},n);c.default.dispatch(f.ji.trackEvent({event:t,properties:Object(o.a)({},a,e)}))},S=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>1&&void 0!==s[1]?s[1]:{},a=h(),l()(a,"session_id")&&n&&c.default.dispatch(f.ji.trackEvent({event:t,properties:Object(o.a)({},n,a)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},820:function(e,t,n){"use strict";var a,r=n(11),o=n(5),s=n(64),c=n(65),i=n(68),l=n(66),u=n(67),d=n(1071),p=n(984),f=n.n(p),h=n(24),b=n(336),v="onopen",g="onreconnect",E="onclose",_="onmaximum",S="onmessage",O="stateUpdated",m=[v,"onerror",g,E,S,_],k=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(l.a)(t).call(this))).state={connected:!1,connecting:!1,pendingEvents:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"_initHeartbeat",value:function(){var e=this;a=setInterval((function(){e.state.connected&&e.sendMessage({data:"PING"})}),5e4)}},{key:"_initEvents",value:function(){var e=this,t=m.reduce((function(t,n){return Object(o.a)({},t,Object(r.a)({},n,(function(t){return e._updateStateOnEvent(n,t)})))}),{});return window.addEventListener("beforeunload",this.close),t}},{key:"_handleMessage",value:function(e){var t=e.type,n=e.payload;t&&n&&(this.emit(t,e),this.emit("".concat(t,":").concat(n.action),e))}},{key:"_updateState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=Object(o.a)({},this.state,e),this.emit(O,this.state)}},{key:"_updateStateOnEvent",value:function(e,t){var n=this,r=Object(o.a)({},this.state);switch(e){case v:r.connected=!0,r.connecting=!1;var s=this.state.pendingEvents,c=void 0===s?[]:s;c.length&&(c.forEach((function(e){return n.sendMessage(e)})),r.pendingEvents=[]);break;case _:break;case E:r.connecting=!1,r.connected=!1,clearInterval(a),t.wasClean||(this.socket.open(),this._initHeartbeat());break;case g:r.connecting=!0;break;case S:var i=t.data,l=JSON.parse(i).body;l&&this._handleMessage(l)}e!==S&&this._updateState(r),this.emit(e,t)}},{key:"onStateUpdated",value:function(e){this.on(O,e)}},{key:"onEvent",value:function(e,t){this.on(e,t)}},{key:"onMessage",value:function(e){this.on(S,e)}},{key:"onAction",value:function(e,t){this.on(e,t)}},{key:"onRemoveAction",value:function(e,t){this.off(e,t)}},{key:"init",value:function(e){var t=this._initEvents();this._updateState({connecting:!0}),this.socket=new d.a("".concat(h.b.socketUrl,"?token=").concat(e),Object(o.a)({},t,{maxAttempts:5})),this._initHeartbeat(),window.sss=this}},{key:"sendMessage",value:function(e){try{var t=this.state,n=t.pendingEvents,a=void 0===n?[]:n;if(t.connecting)return a.push(e),void this._updateState({pendingEvents:a});if(!this.socket)return;this.socket.json({action:"sendMessage",body:e})}catch(e){}}},{key:"close",value:function(){this.socket&&(this._updateState({attemptRefresh:!1}),clearInterval(a),this.socket.close(),this.removeAllListeners())}}]),t}(f.a));Object(b.a)({socketService:k}),t.a=k},851:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a={COMMAND:"COMMAND",PING:"PING",REQUEST_STATE:"REQUEST_STATE"},r={TOGGLE_SLIDESHOW_VISIBILITY:"toggleSlideshowVisibility",CHANGE_SLIDE:"changeSlide",TOGGLE_WHITEBOARD_VISIBILITY:"toggleWhiteboardVisibility",UNMUTE:"unmute",MUTE:"mute",REQUEST_POPUP:"requestPopup",GLOBAL_STATE:"GLOBAL_STATE",GEOGEBRA_EVENTS:"GEOGEBRA_EVENTS",LOAD_STORYBOARD:"LOAD_STORYBOARD",MUSICQUEST_OPEN:"MUSICQUEST_OPEN",MUSESCORE_EVENTS:"MUSESCORE_EVENTS",MUSIC_AUDIO_ACTIVITY_EVENTS:"MUSIC_AUDIO_ACTIVITY_EVENTS",MUSIC_VIDEO_ACTIVITY_EVENTS:"MUSIC_VIDEO_ACTIVITY_EVENTS",OPEN_MUSIC_ACTIVITY_EVENTS:"OPEN_MUSIC_ACTIVITY_EVENTS",ACTIVITY_OPEN:"activityOpen",COCOS_EVENTS:"COCOS_EVENTS",UPDATE_MOBILE_INFO:"updateMobileInfo",GET_STUDENT_APPLET:"GetActivityState",SET_ACTIVITY_STATE:"SetActivityState",SYNC_DATA:"syncData"}},8590:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(53),s=n(64),c=n(65),i=n(68),l=n(66),u=n(67),d=n(2),p=n.n(d),f=n(50),h=n(277),b=n.n(h),v=n(12),g=n(9),E=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={_studentUpcomingClassesLoading:!1},n.componentDidMount=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.fetch();case 1:case"end":return e.stop()}}),e)}))),n.componentDidUpdate=function(){n.fetch(),n.setUpClassRefreshJob()},n.fetch=function(){n.fetchStudentUpcomingClasses(),n.fetchJoinClassAPI()},n.fetchStudentUpcomingClasses=Object(o.a)(r.a.mark((function e(){var t,a,o,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,a=t.studentData,o=t.studentUpcomingClasses,s=t.d__getUpcomingStudentClasses,(c=o.hasOwnProperty("studentUpcomingClassCallCompleted")&&o.studentUpcomingClassCallCompleted)||n.state._studentUpcomingClassesLoading?c&&n.state._studentUpcomingClassesLoading&&n.setState({_studentUpcomingClassesLoading:!1}):(n.setState({_studentUpcomingClassesLoading:!0}),s(a));case 3:case"end":return e.stop()}}),e)}))),n.fetchJoinClassAPI=Object(o.a)(r.a.mark((function e(){var t,a,o,s,c,i,l,u,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.studentData,o=t.classInterfaceData,s=void 0===o?{}:o,c=t.studentUpcomingClasses,i=t.d__getJoinClass,l=n.isNextClassStarted(),u=s&&!s.hasOwnProperty("id")&&!s.isLoading,l&&u){e.next=5;break}return e.abrupt("return");case 5:d=c.nextClass,p={booking:d,id:a.id},i(p);case 8:case"end":return e.stop()}}),e)}))),n.isNextClassStarted=function(){var e=n.props,t=e.studentData,a=e.studentUpcomingClasses;return t&&a&&a.hasOwnProperty("nextClass")&&!b()(a.nextClass)&&"started"===a.nextClass.status},n.setUpClassRefreshJob=function(){var e=n.props,t=e.classInterfaceData,a=e.d__refreshSessionAction;n.classSessionUpdateJob||(n.classSessionUpdateJob=setInterval((function(){"finished"!==t.status?t.id&&a():clearInterval(n.classSessionUpdateJob)}),12e4))},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.children}}]),t}(p.a.Component);t.a=Object(f.connect)((function(e){return{studentData:Object(v.Fb)(e),classInterfaceData:Object(v.J)(e),studentUpcomingClasses:Object(v.ac)(e)}}),(function(e){return{d__getJoinClass:function(t){e(g.fh.request(t))},d__getUpcomingStudentClasses:function(t){e(g.Lg.request(t))},d__refreshSessionAction:function(){e(g.Ph.request())}}}))(E)},8591:function(e,t,n){"use strict";var a=n(64),r=n(65),o=n(68),s=n(66),c=n(67),i=n(2),l=n.n(i),u=n(50),d=n(9),p=n(111),f=n(12),h=n(328),b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){n.initRoom()},n.componentDidUpdate=function(e){n.props.vcProvider&&n.props.vcProvider!==e.vcProvider&&n.fetch(),n.props.twilioToken===e.twilioToken&&n.props.hmsToken===e.hmsToken||n.props.d__updateInClassState({fetchTokenLoading:!1})},n.initRoom=function(){n.props.d__updateInClassState({roomState:"connecting"}),n.fetch()},n.fetch=function(){switch(n.props.d__updateInClassState({fetchTokenLoading:!0}),n.props.vcProvider){case"twilio":n.props.d__getTwilioToken({});break;case"hms":n.props.d__getHMSToken({roomName:n.props.roomName,role:"student"})}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.children;return void 0===e?null:e}}]),t}(l.a.Component);t.a=Object(u.connect)((function(e){var t=Object(f.J)(e)||{},n=t.vcMeetingId;t.class_booking;return{vcProvider:t.vcProvider,roomName:n,connected:e.inClass.connected,twilioToken:Object(p.K)(e),hmsToken:Object(p.q)(e)}}),(function(e){return{d__getTwilioToken:function(t){return e(d.Jg.request(t))},d__getHMSToken:function(t){return e(d.if.request(t))},d__updateInClassState:function(t){return e(h.a.updateInClassState(t))}}}))(b)},8592:function(e,t,n){"use strict";var a=n(49),r=n(2),o=n(50),s=n(16),c=n(9),i=n(111),l=n(1177),u=n(803),d=n(6),p=n.n(d),f=n(1176);t.a=Object(o.connect)((function(e){return{twilioChatTokenData:Object(i.J)(e)}}),(function(e){return{d__getTwilioChatToken:function(t){return e(c.Ig.request(t))},d__resetChatToken:function(){return e(c.Ig.reset())}}}))((function(e){var t=e.twilioChatTokenData,n=e.d__getTwilioChatToken,o=e.d__resetChatToken,c=Object(r.useState)(!1),i=Object(a.a)(c,2),d=i[0],h=i[1],b=(Object(s.lb)()||{}).id||!1;return t.token&&(d&&h(!1),function(){var e=l.b.getCurrentState(),n=e.connected,a=e.connecting;if(!n&&!a){var r=t.token,o=t.channelSid;l.b.init({token:r,channelId:o}).catch((function(e){console.error("TwilioChatInitError: ",e),Object(u.c)({name:p()(e,"name","TwilioChatInitErrorr"),message:p()(e,"message","TwilioChatInitError"),eventType:"Error"},f.r)}))}}()),Object(r.useEffect)((function(){return function(){o(),l.b.close()}}),[]),Object(r.useEffect)((function(){!b||d||t.token||(h(!0),n({sessionId:b}))}),[b,t]),null}))},8593:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(5),r=n(64),o=n(65),s=n(68),c=n(66),i=n(67),l=n(2),u=n.n(l),d=n(58),p=n.n(d),f=n(50),h=n(820),b=n(12),v=n(2408),g=n(214),E=n(328),_=n(16),S=n(851),O=n(9),m=n(212),k=n(60),I=n(36),C=n(1447),T=n(111),j=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={socketConnected:!1,showSnackbar:!1,snackbarMsg:"no-message",snackbarType:"info"},n.componentDidMount=function(){h.a.onStateUpdated((function(e){e.connected&&n.setState({socketConnected:!0})})),n.requestInitialState(),n._initEvents()},n.componentWillUnmount=function(){n._destroyEvents()},n.requestInitialState=function(){var e=n.props.authUser,t=Object(_.lb)(),a=t.vcMeetingId,r={version:"1.0",sessionId:t.id,type:S.b.REQUEST_STATE,payload:{action:S.a.GLOBAL_STATE,state:{}},priority:3,senderDetails:{uid:e.id,roomId:a,role:"student"},target:"*",relatedMessageId:"",sentAt:(new Date).toISOString(),forwardedAt:null};h.a.sendMessage(r)},n._initEvents=function(){h.a.onEvent("".concat(S.b.REQUEST_STATE),n.updateStoryboardState),h.a.onAction("".concat(S.b.COMMAND,":").concat(S.a.TOGGLE_SLIDESHOW_VISIBILITY),n.onToggleStoryboard),h.a.onAction("".concat(S.b.COMMAND,":").concat(S.a.TOGGLE_WHITEBOARD_VISIBILITY),n.onToggleWhiteboard),h.a.onAction("".concat(S.b.COMMAND,":").concat(S.a.CHANGE_SLIDE),n.onStoryboardChange),h.a.onAction("COMMAND:BROADCAST_SCREEN",n.onSocketMessageCastScreen),h.a.onAction("".concat(S.b.COMMAND,":").concat(S.a.LOAD_STORYBOARD),n.onLoadStoryboard),h.a.onAction("".concat(S.b.COMMAND,":").concat(S.a.LOAD_WHITEBOARD),n.onLoadWhiteboard)},n._destroyEvents=function(){h.a.removeListener("".concat(S.b.REQUEST_STATE),n.updateStoryboardState),h.a.removeListener("".concat(S.b.COMMAND,":").concat(S.a.TOGGLE_SLIDESHOW_VISIBILITY),n.onToggleStoryboard),h.a.removeListener("".concat(S.b.COMMAND,":").concat(S.a.CHANGE_SLIDE),n.onStoryboardChange),h.a.removeListener("".concat(S.b.COMMAND,":").concat(S.a.TOGGLE_WHITEBOARD_VISIBILITY),n.onToggleWhiteboard),h.a.removeListener("COMMAND:BROADCAST_SCREEN",n.onSocketMessageCastScreen),h.a.removeListener("".concat(S.b.COMMAND,":").concat(S.a.LOAD_STORYBOARD),n.onLoadStoryboard)},n.logSlideshowPageVisibleEvent=function(e){var t=n.props,r=t.sendEvents,o=t.currentSlideshowIndex,s=e.horizontalIndex,c=void 0===s?0:s,i=e.verticalIndex,l=void 0===i?0:i,u=c+(0!==l?".".concat(l):""),d=Object(_.lb)(),p=d.id,f=d.bookingId,h=d.class_booking,b=(void 0===h?{}:h).courseClassId,v=Object(a.a)({sendEvents:r},k.i.VISIBLE,{s3:p,s4:f,s5:b,s3SchemaName:"session_id",s4SchemaName:"booking_id",s5SchemaName:"course_class_id",b1:u,b2:o});Object(m.a)(v)},n.onToggleStoryboard=function(e){var t=e.payload,a=(void 0===t?{}:t).state,r=a.isSlideShowVisible,o=void 0!==r&&r,s=a.isWhiteBoardVisible,c=n.props,i=c.d__updateInClassState,l=c.d__toggleSlideshowVisibility,u=c.indices;i({mainView:o?E.c.STORYBOARD:s?E.c.WHITEBOARD:E.c.VIDEO}),l(o),o&&n.logSlideshowPageVisibleEvent(u)},n.onToggleWhiteboard=function(e){var t=e.payload,a=(void 0===t?{}:t).state,r=a.isWhiteBoardVisible,o=void 0!==r&&r,s=a.isSlideshowVisible,c=void 0!==s&&s,i=n.props,l=i.d__updateInClassState,u=i.d__toggleWhiteboardVisibility;l({mainView:o?E.c.WHITEBOARD:c?E.c.STORYBOARD:E.c.VIDEO}),u(o)},n.onStoryboardChange=function(e){var t=e.payload,a=void 0===t?{}:t,r=n.props,o=r.d__updateSlideshowIndices,s=r.d__updateCurrentSlideshowIndex,c=r.storyBoardsInfo,i=a.state,l=i.verticalIndex,u=i.horizontalIndex,d=i.transitionIndex,p=i.isSlideShowVisible,f=i.storyboardIndex,h={verticalIndex:l,horizontalIndex:u,transitionIndex:d};o(h);Object(_.lb)();var b=c;f>b.length&&(f=b.length),f&&s(f),!1!==p&&n.logSlideshowPageVisibleEvent(h)},n.onLoadStoryboard=function(e){var t=e.payload,a=(void 0===t?{}:t).state.storyboardIndex;n.props.loadStoryboard(a)},n.onLoadWhiteboard=function(e){var t=e.payload,a=(void 0===t?{}:t).state.whiteboardIndex;n.props.loadWhiteboard(a)},n.updateStoryboardState=function(e){n.onToggleStoryboard(e),n.onStoryboardChange(e)},n.updateWhiteboardState=function(e){n.onToggleWhiteboard(e)},n.onSocketMessageCastScreen=function(e){},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"_showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.setState({showSnackbar:!0,snackbarMsg:e,snackbarType:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.snackbarMsg,a=t.snackbarType,r=t.showSnackbar;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-hidden inclass-socket-events-initializer"}),p.a.createPortal(u.a.createElement(g.a,{message:n,variant:a||"info",open:r,timeout:2e3,onClose:function(){return e.setState({showSnackbar:!1})}}),document.getElementById("root")))}}]),t}(u.a.Component),D=Object(f.connect)((function(e){return{authUser:Object(b.Ec)(e),inClassVideoState:e.inClass.video,indices:Object(I.w)(e),currentSlideshowIndex:Object(I.g)(e),storyBoardsInfo:Object(T.D)(e)}}),(function(e){return{d__toggleSlideshowVisibility:function(t){return e(O.Mi.toggleVisibility(t))},d__toggleWhiteboardVisibility:function(t){return e(O.Qj.toggleVisibility(t))},d__updateSlideshowIndices:function(t){return e(O.Mi.updateIndices(t))},d__updateInClassState:function(t){return e(E.a.updateInClassState(t))},sendEvents:function(t){return e(O.ui.request(t))},d__updateCurrentSlideshowIndex:function(t){return e(O.Mi.updateCurrentStoryboardIndex(t))}}}))(j);function y(e){return u.a.createElement(v.a,null,(function(t){var n=t.openUserActionDialog;return u.a.createElement(C.a,null,(function(t){return u.a.createElement(D,Object.assign({openUserActionDialog:n},t,e))}))}))}},882:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(53),s=n(5),c=n(64),i=n(65),l=n(68),u=n(66),d=n(67),p=n(2),f=n.n(p),h=n(6),b=n.n(h),v=n(104),g=n.n(v),E=n(63),_=n(755),S=n(12),O=n(50),m=n(9),k=n(740),I=n(744),C=n(33),T=n(1104),j=n(76),D=n(215),y=n(803),A=n(36),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleCall=function(){n.handleSegmentEvent();var e=n.props,t=e.to,a=e.student,r=b()(a,"isOtpOnCancellation",!1),o={to:t,userType:b()(n.props,"loggedInUser","").toLowerCase()};r?(n.props.d__showOtpDialog({showDialog:n.actionType,title:"Call Helpdesk",extraData:{actionType:n.actionType,data:o}}),n.setState((function(e){return Object(s.a)({},e,{otpShown:!0,callInitiated:!1})}))):(o.to?n.props.d_callHelpDesk(o):n.props.d_exotelCallHelpDesk(o),n.setState((function(e){return Object(s.a)({},e,{otpShown:!1,callInitiated:!0})})))},n.sendSegmentEventAction=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(y.d)(),e.next=3,Object(y.e)();case 3:c=e.sent,n.props.sendEventAction({event:a,properties:Object(s.a)({},o,c,t)});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.onClose=function(){(0,n.props.onClose)()},n.getTitle=function(){var e=n.props.callLabel;return"help desk"==e?f.a.createElement(E.a,{id:"helpDeskModal.title.HELP_DESK",defaultMessage:"help desk"}):e},n.state={callInitiated:!1,callData:e.to?e.callContactDetails.data:e.callContactDetailsExotel.data,otpShown:!1},n.actionType="CALL_HELPDESK",n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSegmentEvent",value:function(){if(""!=b()(this.props,"classInterfaceData.class_booking.session_id","")){var e="",t="";this.props.student?"string"==typeof this.props.callLabel?"teacher"==this.props.callLabel?this.sendSegmentEventAction({position:"header"},"Proceed to call ".concat(this.props.callLabel," clicked")):this.sendSegmentEventAction({position:"header"},"Student proceed to call helpdesk clicked"):(t="student 3 dot video menu","teacher"==(e=this.props.callLabel.props.defaultMessage)?this.sendSegmentEventAction({position:t},"Proceed to call ".concat(e," clicked")):this.sendSegmentEventAction({position:t},"Student proceed to call helpdesk clicked")):"help desk"==this.props.callLabel?"header"==this.props.helpDeskPosition?this.sendSegmentEventAction({position:"header"},"Teacher proceed to call helpdesk clicked"):this.sendSegmentEventAction({position:"teacher 3 dot video menu"},"Teacher proceed to call helpdesk clicked"):"string"==typeof this.props.callLabel?this.sendSegmentEventAction({position:"header"},"Proceed to call student clicked"):"help desk"==(e=this.props.callLabel.props.defaultMessage)?this.sendSegmentEventAction({position:"header"},"Teacher proceed to call helpdesk clicked"):this.sendSegmentEventAction({position:"header"},"Proceed to call student clicked")}}},{key:"handleSegmentCancelEvent",value:function(){if(""!=b()(this.props,"classInterfaceData.class_booking.session_id",""))if(this.props.student)if("string"==typeof this.props.callLabel)"teacher"==this.props.callLabel?this.sendSegmentEventAction({position:"header"},"Student call to ".concat(this.props.callLabel," cancelled")):this.sendSegmentEventAction({position:"header"},"Student call to helpdesk cancelled");else{var e=this.props.callLabel.props.defaultMessage;if("teacher"==e){this.sendSegmentEventAction({position:"student 3 dot video menu"},"Student call to ".concat(e," cancelled"))}else{this.sendSegmentEventAction({position:"student 3 dot video menu"},"Student call to helpdesk cancelled")}}else if("student"===this.props.callLabelTest)this.sendSegmentEventAction({},"call to ".concat(this.props.callLabelTest," cancelled"));else if("help desk"==this.props.callLabelTest){var t="";t="header"==this.props.helpDeskPosition?"header":"teacher 3 dot video menu",this.sendSegmentEventAction({position:t},"Teacher call  helpdesk cancelled")}}},{key:"componentWillUnmount",value:function(){this.props.resetCallHelpdeskOrTeacher(),this.props.resetCallHelpdeskExotel()}},{key:"render",value:function(){var e=this,t=this.getTitle();return f.a.createElement(p.Fragment,null,!this.state.otpShown&&f.a.createElement(k.a,{open:!0,onClose:this.onClose,"aria-labelledby":"form-dialog-title",classes:{paper:"dialog_container width_auto not_rounded theme__color-primary-imp theme__bg-primary-imp"}},this.state.callInitiated?f.a.createElement(I.a,null,f.a.createElement("div",{className:"content pt-0 pb-0"},f.a.createElement("div",{className:"heading2_bold text-center mb-2"},f.a.createElement(E.a,{id:"helpDeskModal.YOUR_REQUEST_HAS_BEEN_ACKNOWLEDGED_BY_OUR_SYSTEM",defaultMessage:"Your request has been acknowledged by our system"})),f.a.createElement("div",{className:"heading4_reg text-center mt-4"},f.a.createElement(E.a,{id:"helpDeskModal.OUR_HELP_DESK_TEAM_WILL_SOON_CONNECT_WITH_YOU",defaultMessage:"Our help desk team will soon connect with you"})),f.a.createElement("div",{className:"text-center mt-3 pt-3"},f.a.createElement("button",{onClick:this.onClose,className:"btn btn_orange heading6_reg pl-4 pr-4"},f.a.createElement(E.a,{id:"helpDeskModal.OK",defaultMessage:"Ok"}))))):f.a.createElement(I.a,null,f.a.createElement("div",{className:"content pt-0 pb-0"},f.a.createElement("div",{className:"heading2_bold text-center mb-2"},f.a.createElement(E.a,{id:"helpDeskModal.DO_YOU_WANT_TO_CALL",defaultMessage:"Do you want to call {title}?",values:{title:t}})),f.a.createElement("div",{className:"heading4_reg text-center mt-4"},f.a.createElement(E.a,{id:"helpDeskModal.ONCE_YOU_PROCEED_TO_CALL,",defaultMessage:"Once you proceed to call, {title} will be notified and",values:{title:t}}),f.a.createElement("br",null),f.a.createElement(E.a,{id:"helpDeskModal.YOU_WILL_SOON_RECEIVE_A_CALL_ON_YOUR_REGISTERED_MOBILE_NUMBER.",defaultMessage:"you will soon receive a call on your registered mobile number."})),f.a.createElement("div",{className:"text-center mt-3 pt-3"},f.a.createElement("button",{onClick:this.handleCall,className:"btn btn_orange heading6_reg pl-4 pr-4"},f.a.createElement(E.a,{id:"helpDeskModal.PROCEED_TO_CALL",defaultMessage:"Proceed to call {title}",values:{title:t}}))),f.a.createElement("div",{className:"heading6_bold text_blue text-center mt-4 cursor_pointer"},f.a.createElement("span",{className:"icon-left-arrow font8 mr-1"}),f.a.createElement("span",{onClick:function(){e.handleSegmentCancelEvent(),e.onClose()}},f.a.createElement(E.a,{id:"helpDeskModal.NO,_I_DON'T_WANT_TO_CALL",defaultMessage:"No, i don't want to call {title}",values:{title:t}})))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.to?b()(e,"callContactDetails.data"):b()(e,"callContactDetailsExotel.data"),a=t.callData;if(n&&n.Call&&g()(a,n))return Object(s.a)({},t,{callInitiated:!1});var r=!!(n.Call&&b()(n,"Call.Sid")||n.code),o=!(!n.api_id&&!n.phlo_id);return Object(s.a)({},t,{callData:n,otpShown:!1,callInitiated:r||o})}}]),t}(p.Component);w.defaultProps={callLabelTest:"",helpDeskPosition:""},t.a=Object(O.connect)((function(e){return{student:Object(j.M)(e),timezone:Object(D.b)(e),countryCode:Object(S.k)(e),otpDialog:Object(C.g)(e),callContactDetails:Object(T.a)(e),callContactDetailsExotel:Object(T.b)(e),classInterfaceData:Object(S.J)(e),loggedInUser:Object(A.d)(e)}}),(function(e){return{d_getStudentQueryFeedback:function(t){e(m.gg.request({projectId:t}))},d_callHelpDesk:function(t){e(m.Zg.request(t))},d_exotelCallHelpDesk:function(t){e(m.ah.request(t))},d__showOtpDialog:function(t){e(m.uh.set(t))},sendEventAction:function(t){e(m.ji.trackEvent(t))},resetCallHelpdeskOrTeacher:function(){return e(m.Zg.reset())},resetCallHelpdeskExotel:function(){return e(m.ah.reset())}}}))(Object(_.a)(w))},9480:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(50),s=n(12),c=n(8590),i=n(2768),l=n(1519),u=n(8591),d=n(8592),p=n(2724),f=n(2733),h=n(64),b=n(65),v=n(68),g=n(66),E=n(67),_=n(9),S=n(16),O=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.addChatTags()}},{key:"addChatTags",value:function(){var e=this.props,t=e.addChatTags,n=e.classInterfaceData,a=void 0===n?{}:n,r=e.studentData,o=a.class_booking;if(o){var s=Object(S.vc)()&&Object(S.vc)().toLowerCase(),c=o.isTrial?"trial_".concat(s):"paid_".concat(s),i=o.bookingType||"";t(["student","session_id__"+o.bookingIdInt,r?"dial_code__"+r.dialCode:"","inclass","BYJU"===r.referralType?"BYJUS_FutureSchool":"","batch"===i.toLowerCase()?c+"_one_to_many":c].filter((function(e){return e})))}}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.classInterfaceData,r=void 0===a?{}:a,o=e.classInterfaceData||{};r.id!==o.id&&this.addChatTags()}},{key:"componentWillUnmount",value:function(){this.props.clearChatTags()}},{key:"render",value:function(){return null}}]),t}(a.Component),m=Object(o.connect)((function(e){return{studentData:Object(s.Fb)(e),classInterfaceData:Object(s.J)(e)}}),(function(e){return{addChatTags:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={list:t,onlyOnChatStart:n};e(_.xj.add(a))},clearChatTags:function(){return e(_.xj.clear())}}}))(O),k=n(49),I=n(6),C=n.n(I),T=Object(o.connect)((function(e){return{studentData:Object(s.Fb)(e),classInterfaceData:Object(s.J)(e)}}),(function(e){return{navigateToPath:function(t){e(_.sh.request(t))}}}))((function(e){var t=e.classInterfaceData,n=e.studentData,r=e.navigateToPath,o=e.children,s=void 0===o?null:o,c=Object(a.useState)(!1),i=Object(k.a)(c,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){var e=function(e){return e&&"finished"===e.status}(t)&&function(e){return C()(e,"class_booking.isTrial",!1)}(t);if(!l&&e){var a=function(e,t){var n=e.bookingId,a=void 0!==n&&n,r=e.id,o=t&&t.id,s=C()(e,"class_booking.course_class");return{bookingId:a,classSessionId:r,studentId:o,classNumber:C()(s,"classNumber")}}(t,n);localStorage.setItem("trialClassDataForReview",JSON.stringify(a)),u(!0),r("/s/dashboard")}}),[t,n]),s})),j=n(8593),D=n(5),y=n(58),A=n.n(y),w=n(214);function L(e){var t={message:"Default Notification",variant:"info"},n=Object(a.useState)(!1),o=Object(k.a)(n,2),s=o[0],c=o[1],i=Object(a.useState)(Object(D.a)({},t)),l=Object(k.a)(i,2),u=l[0],d=l[1];return r.a.createElement(M.Provider,{value:{showNotification:function(e){var n=Object(D.a)({},t,e);d(n),c(!0)}}},s&&A.a.createPortal(r.a.createElement(w.a,{message:u.message,variant:u.variant||"info",open:s,timeout:2e3,onClose:function(){return c(!1)}}),document.getElementById("root")),e.children)}var M=r.a.createContext({}),N=n(328);var x=Object(o.connect)((function(e){return{mainView:e.inClass.mainView,classInterfaceData:Object(s.J)(e)}}))((function(e){var t=e.mainView,n=e.classInterfaceData,a=e.children,o="completed"===n.classStatus&&"finished"===n.status,s=t===N.c.PARENTAL_CONSENT;return o?r.a.createElement(c.a,null,r.a.createElement(T,null,a)):s?r.a.createElement(c.a,null,r.a.createElement(f.a,null),r.a.createElement(T,null,r.a.createElement(i.b,null,a))):r.a.createElement(c.a,null,r.a.createElement(d.a,null),r.a.createElement(p.a,null),r.a.createElement(f.a,null),r.a.createElement(m,null),r.a.createElement(T,null),r.a.createElement(L,null,r.a.createElement(i.b,null,r.a.createElement(l.b,null,r.a.createElement(j.a,null),r.a.createElement(u.a,null,a)))))}));n.d(t,"default",(function(){return R}));var U=r.a.lazy((function(){return n.e(319).then(n.bind(null,9605))}));function R(e){return r.a.createElement(x,null,r.a.createElement(U,e))}}}]);
//# sourceMappingURL=168.69914d56.chunk.js.map