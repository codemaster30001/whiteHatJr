(window.webpackJsonp=window.webpackJsonp||[]).push([[293,358],{1182:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d}));var a=n(5),s=n(6),i=n.n(s),c=n(18),u=n(845),o=function(e){return i()(Object(c.h)(e),"studentAllClassesQuiz",{})},l=function(e){return o(e).data.map((function(e){var t=i()(e,"booking.quiz_triggers",i()(e,"class.quiz_triggers",{})),n=Object(u.k)(t),s=!!n&&Object(u.d)(Object(u.j)(n));return Object(a.a)({},e,{isQuizCompleted:s})}))},r=function(e){return i()(Object(c.h)(e),"inClassQuiz",{})},d=function(e){return i()(Object(c.h)(e),"fetchInClassQuizIds",{})}},1556:function(e,t){},2397:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n(49),i=n(2),c=n.n(i),u=n(995),o=n(6),l=n.n(o),r=(n(486),n(9)),d=n(50),_=n(12),f=n(1182),b=n(1192),g=n(36),I=n(325),m=n(922),E=n(63),z=n(1191),O=n(820),p=n(24),v=n(1555),C=n(16),h=n(2591),j=n(9662),S=n(1136),T=n(33),q=n(10),Q=localStorage.getItem("language"),k="en_US";"string"==typeof Q&&(k=Q.replace("-","_").toLowerCase());t.default=Object(d.connect)((function(e){return{classInterfaceData:Object(_.J)(e),inClassQuizIds:Object(f.b)(e),isTeacher:Object(g.p)(e),studentData:Object(g.t)(e),loggedInUser:Object(T.f)(e)}}),(function(e){return{d__fetchInClassQuizIds:function(t){return e(r.J.request(t))},d__fetchInClassQuizIdsReset:function(){return e(r.J.reset())},d__showChat:function(){return e(r.Qc.show())},d__hideChat:function(){return e(r.Qc.hide())}}}))((function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),o=n[0],r=n[1],d=Object(i.useState)({}),_=Object(s.a)(d,2),f=_[0],g=_[1],T=Object(i.useState)([]),Q=Object(s.a)(T,2),A=Q[0],y=Q[1],N=Object(i.useState)(!1),U=Object(s.a)(N,2),L=U[0],w=U[1],D=Object(i.useState)(null),M=Object(s.a)(D,2),R=M[0],x=M[1],Z=e.classInterfaceData,P=void 0===Z?{}:Z,F=e.d__fetchInClassQuizIds,J=e.isTeacher,B=e.d__fetchInClassQuizIdsReset,G=e.studentData,K=e.d__showChat,W=e.d__hideChat,Y=e.onToggleFullScreen,H=e.session_events,V=e.inClassQuizIds,X=e.loggedInUser,$=P.class_booking,ee=void 0===$?{}:$,te=!!ee&&"L"===ee.deliveryChannel,ne=Object(b.i)(P,G,"",J),ae=ne.student_bookings,se=ne.teacherId,ie=ne.isTrial,ce=l()(ae,"[0].student.countryCode","");Object(i.useEffect)((function(){return function(){return B()}}),[]),Object(i.useEffect)((function(){if(l()(P,"class_booking.course_version_class_id",null)){var e={quizSlugId:"".concat(C.b,"-").concat(l()(P,"class_booking.course_version_class_id",""),"-IN_CLASS_QUIZ")};F(e)}}),[P]),Object(i.useEffect)((function(){l()(V,"data",[]).length&&(O.a.onEvent("REQUEST_STATE:GLOBAL_STATE",(function(e){if(l()(e,"payload",null)&&e.sessionId===l()(P,"id","")){var t=l()(V,"data",[]).find((function(t){return l()(l()(e,"payload.state",{})[t.quizId],"status","").length&&"COMPLETED"!==l()(l()(e,"payload.state",{})[t.quizId],"status","")}));if(t){x(l()(e,"payload.state",null));var n={quizId:l()(t,"quizId",""),quizSlug:l()(t,"quizSlug","")};g(n),w(!0)}}})),O.a.onEvent("COMMAND:IN_CLASS_QUIZ",(function(e){if(l()(e,"payload",null)&&e.sessionId===l()(P,"id","")){var t=l()(V,"data",[]).find((function(t){return l()(l()(e,"payload.state",{})[t.quizId],"status","").length&&"COMPLETED"!==l()(l()(e,"payload.state",{})[t.quizId],"status","")}));if(t){var n={quizId:l()(t,"quizId",""),quizSlug:l()(t,"quizSlug","")};g(n),w(!0)}}})))}),[P,V]);var ue=function(){var e=A,t=e.findIndex((function(e){return e.quizId===f.quizId}));-1!==t&&(e[t].isQuizCompleted=!0),y(e),g({}),w(!1)};Object(i.useEffect)((function(){L?W():K()}),[L]),Object(i.useEffect)((function(){l()(V,"data",[]).length&&O.a.onEvent("REQUEST_STATE:GLOBAL_STATE",(function(e){var t=l()(V,"data",[]).map((function(t,n){return Object(a.a)({},t,{isQuizCompleted:"COMPLETED"===l()(l()(e,"payload.state",{})[t.quizId],"status",""),name:"Quiz ".concat(n+1)})}));y(t)}))}),[V]),L&&Y&&Y(!1);var oe,le,re=Boolean(Object(z.c)(H,z.a)),de=!ie||z.e.includes(ce)||ie&&re;return c.a.createElement(c.a.Fragment,null,L?c.a.createElement(c.a.Fragment,null,c.a.createElement(u.c,{isTeacher:J,className:"quiz-panel"},c.a.createElement(v.QuizInit,{locale:k,clientTheme:C.c,quizSlugId:f.quizId,tenantId:l()(p.b,"IN_CLASS_QUIZ_TENANT_ID",""),clientId:C.b,attemptNo:1,userId:J?se:l()(G,"id",""),onExitQuizAfterCompletion:ue,onExitQuizBeforeCompletion:ue,configData:{quizAPIUrl:l()(p.b,"QUIZ_SDK_API_URL",""),uId:X.id,roomId:l()(P,"vcMeetingId",""),role:l()(X,"userRoles",[])[0],sessionId:l()(P,"id",""),students:J?(oe=l()(P,"class_booking.student_bookings",[]),le=[],oe.length&&oe.forEach((function(e){var t={id:l()(e,"student.id",""),name:l()(e,"student.name","")};le.push(t)})),le):[],quizSlug:"".concat(C.b,"-").concat(l()(P,"class_booking.course_version_class_id",""),"-IN_CLASS_QUIZ"),wsStateObj:R,ddSampleRate:100,contextObj:{class_booking_teacherId:l()(P,"class_booking.teacherId",""),class_booking_studentId:l()(P,"class_booking.studentId",""),class_booking_bookingType:l()(P,"class_booking.bookingType",""),class_booking_course_class_courseId:l()(P,"class_booking.course_class.courseId",""),vcProvider:l()(P,"vcProvider",""),class_booking_course_version_class_id:l()(P,"class_booking.course_version_class_id","")}},wsObj:O.a,role:J?"QUIZ_MASTER":"STUDENT",quizMode:"FREE_FLOW"}))):J&&de&&te?c.a.createElement(c.a.Fragment,null,A.length?c.a.createElement(u.d,null,c.a.createElement("div",null,c.a.createElement("img",{className:"clock-img",src:q.Kg,alt:"clock"})),c.a.createElement("div",{className:"quiz-select-parent"},c.a.createElement("div",{className:"quiz-text"},c.a.createElement(E.a,{id:"inclassquiztimepanel.QUIZ_TIME",defaultMessage:"Quiz Time"})),c.a.createElement(h.a,{variant:"outlined",className:"form-control"},c.a.createElement(j.a,{value:f,onChange:function(e){g(e.target.value),r(!0)}},A.map((function(e){return c.a.createElement(S.a,{value:e,key:e.quizId,disabled:e.isQuizCompleted},e.name)})))))):null):null,c.a.createElement(I.a,{open:o,disableDialogTitle:!0,classes:{container:"d-flex align-items-center justify-content-center"},action_content:c.a.createElement("div",{className:"mt-1 d-flex align-items-center justify-content-end w-100"},c.a.createElement("div",{className:"px-2"},c.a.createElement(m.a,{primaryCTA:{text:c.a.createElement(E.a,{id:"inclassquiztimepanel.START_QUIZ",defaultMessage:"START QUIZ"}),buttonClass:"font16 heading_bold p-2 px-4 border_radius5",border:"0",onClick:function(){o&&r(!1),w(!0)}},secondaryCTA:{className:"heading_bold font16 cursor_pointer",color:"#ff9055",text:c.a.createElement(E.a,{id:"inclassquiztimepanel.CANCEL",defaultMessage:"CANCEL"}),onClick:function(){r(!1),g({})}}}))),onClose:function(){return r(!1)}},c.a.createElement("div",{className:"heading_bold d-flex justify-content-center font20"},c.a.createElement(E.a,{id:"inclassquizTimePanel.ARE_YOU_SURE_WANT",defaultMessage:"Are you sure you want to start the Quiz ?"}))))}))}}]);
//# sourceMappingURL=293.e7f180ac.chunk.js.map